[<- к содержанию](readme.md)

## Основы слияния

Допустим нам поставили задачу, для которой нам нужно сделать ответвление от основной (master) ветки, пусть это будет ветка *iss53*.

`git checkout -b iss53`

 Мы работаем над задачей и получаем сообщение что появилась более срочная задача, к которой нужно немедленно приступить. Мы коммитим сделанные изменения в ветку *iss53*, переключаемся обратно на ветку *master*.

 `git commit -am "<comment>"`

 `git checkout master`

 Создаем новую ветку.

 `git checkout -b hotfix`

![](./assets/git_megre/basic-branching-4.png)

***Рисунок 4. Ветка hotfix основана на ветке master***

 Усешно справляемся со срочной задачей и нам нужно выполнить слияние ветки *hotfix* с веткой *master* для применения изменений. Для этого переключаемся снова на ветку master и выполняем команду `git merge`

 `git checkout master`

 `git merge hotfix`

![](./assets/git_megre/basic-branching-5.png)

***Рисунок 5. master перемотан до hotfix***

 Если коммит сливается с тем, до которого можно добраться двигаясь по истории прямо, *Git* упрощает слияние просто перенося указатель ветки вперед, так как нет расхождений в изменениях. Это называется *«fast-forward»*.

Ветка *hotfix* теперь не нужно и её можно удалить.

`git branch -d hotfix`

Теперь мы можем вернутся к ветке iss53 и продолжить работу в неё. 

`git checkout iss53`

Предположим мы завершили работу с задачей в ветке iss53 и решили слить её в ветку master.

`git commit -am <comment2>`

`git checkout master`

`git merge iss53`

Результат этой операции отличается от результата слияния ветки *hotfix*. В данном случае процесс разработки ответвился в более ранней точке. Так как коммит, на котором мы находимся, не является прямым родителем ветки, с которой мы выполняем слияние, *Git* придётся немного потрудиться. В этом случае *Git* выполняет простое трёхстороннее слияние, используя последние коммиты объединяемых веток и общего для них родительского коммита.

![](./assets/git_megre/basic-merging-1.png)

***Рисунок 6. Использование трёх снимков при слиянии***

Вместо того, чтобы просто передвинуть указатель ветки вперёд, *Git* создаёт новый результирующий снимок трёхстороннего слияния, а затем автоматически делает коммит. Этот особый коммит называют коммитом слияния, так как у него более одного предка.

![](./assets/git_megre/basic-merging-2.png)

***Рисунок 7. Коммит слияния***

Теперь когда все изменения слиты и ветка *iss53* больше не нужна, мы можем её удалить

`git branch -d iss53`